あに瓶さんの利用しているソフトが古く、メンテナンスもされていないようなので、再検討した上で独自の変換ルールを使用します。

- 必要なソフトウェア
  
  - ImageMagick
    
    - Version:>=6.5.4-3(MUST),>=7(SHOULD)
    
    - With FFT(convert -fftが利用可能であること)
    
    - Q16(MUST,Q8は不可) HDRI対応(内部的に32bit)
  
  - Linux/MacOS推奨。WSLでも可

手順

従来のFFT式判定は[GitHub - yuuki76/ANIFFT: Auto FFT tool](https://www.blogger.com/blog/post/edit/7206288531672684145/5114257932708086161#)←このコードに準拠します

[GitHub - Infiziert90/getnative: Find the native resolution(s) of upscaled material (mostly anime)](https://github.com/Infiziert90/getnative)を利用した自動判定をメインに行っていきます

縦解像度が

- 1080である場合FHD
- 1080>,900<=である場合FHD-
- 900>,720<である場合HD+
- 720である場合HD
- 720>,540<=である場合HD-
- 540>,360<である場合SD+
- 360である場合SD
- 360>である場合SD-

とします

フレームの選択に関しては、あに瓶さんのルールをお借りします。

> 処理対象フレームの選択には以下のルールを設定する
> 
> ・テロップ等がないフレーム
> 
> 　時計表示等、常時表示される部分は削除する（該当領域を矩形で黒くする）
> 
> 　局ロゴは原則として削除しない
> 
> 　生データでない場合は、加工について記述しています
> 
> ・コーミングがないフレーム
> 
> 　ただし、SD-i等、フィールド単位の拡大による縞はここでは"コーミング"と解釈しない
> 
> ・画像の動きが少なく、MPEG2圧縮によるノイズがほぼ見えないフレーム
> 
> 　そのような場所がない場合は、劣化が少ないフレームを選択
> 
> ・他の部分と明らかに異なるぼかし等の処理がない
> 
> ・背景のみでなく人物等（古典的に言えばセルに描かれるような部分？）が含まれるフレーム
